\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{natbib}
\usepackage[french]{babel}
\usepackage{pdfpages}

\title{Rapport du projet de Programmation Système}
\date{\today}

\usepackage{graphicx}
\usepackage[T1]{fontenc}
\usepackage{hyperref} % 		Ajouter des liens
\usepackage{color} % 			Gestion des couleurs
\usepackage[normalem]{ulem} % 	Underline

\usepackage{comment}%			Commenter

\usepackage{listingsutf8}% 		Code informatique
\definecolor{mGreen}{rgb}{0,0.6,0}
\definecolor{mGray}{rgb}{0.5,0.5,0.5}
\definecolor{mPurple}{rgb}{0.58,0,0.82}
\definecolor{backgroundColour}{rgb}{0.95,0.95,0.92}
\lstset{
	tabsize=4,
    	extendedchars=true,
    	breaklines=true,
    	keepspaces=true,
	inputencoding=utf8,
    	extendedchars=true,
    	literate=%
                {é}{{\'e}}{1}%
                {è}{{\`e}}{1}%
                {à}{{\`a}}{1}%
                {ç}{{\c{c}}}{1}%
                {œ}{{\oe}}{1}%
                {ù}{{\`u}}{1}%
                {É}{{\'E}}{1}%
                {È}{{\`E}}{1}%
                {À}{{\`A}}{1}%
                {Ç}{{\c{C}}}{1}%
                {Œ}{{\OE}}{1}%
                {Ê}{{\^E}}{1}%
                {ê}{{\^e}}{1}%
                {î}{{\^i}}{1}%
                {ô}{{\^o}}{1}%
                {û}{{\^u}}{1}%
                {ë}{{\¨{e}}}1
                {û}{{\^{u}}}1
                {â}{{\^{a}}}1
                {Â}{{\^{A}}}1
                {Î}{{\^{I}}}1
                {|}{|}1  
}
\lstdefinestyle{CMakeStyle}{
    language={},
  	backgroundcolor=\color{backgroundColour},
    numberstyle=\tiny\color{mGray},
    basicstyle=\footnotesize,
    numbers=left,
    numbersep=5pt,
  	frame=single,
}
\lstdefinestyle{C++Style}{
    backgroundcolor=\color{backgroundColour},
    commentstyle=\color{mGreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{mGray},
    stringstyle=\color{mPurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    numbers=left,
    numbersep=5pt,
    language=C++
}


\begin{document}

\begin{titlepage}
 \begin{sffamily}
  \begin{center}
            \includegraphics[scale=0.04]{img/ubx-logo.png}
            \\[2cm]
        
    
    {\huge \bfseries Rapport de Projet technologique\\[0.5cm] }

    \rule{\linewidth}{.5pt}
    \\[2cm]

    \begin{minipage}{0.4\textwidth}
      \begin{flushleft} \large
        \author{}Etudiants :\\
        	Marc \textsc{Cerutti}\\
      \end{flushleft}
    \end{minipage}

    \vfill

    {\large \today}

  \end{center}
  \end{sffamily}
  
\end{titlepage}

\newpage

\tableofcontents

%------------------%
\newpage
\part{Présentation du sujet}

	L'objectif de ce projet de L3 informatique est à terme de créer un robot suiveur qui suivrai son utilisateur à distance de 2 mètres.\\

	On passera cependant par plusieurs étapes.
	\\\\
	D'abord la création de nos fonctions d'analyse et une interface graphique à partir de la bibliothèque OpenCv et Qt respectivement. OpenCv implémente notamment des algorithmes pour faire les filtres, les cartes de disparité et les cartes de profondeur nécessaires à l'analyse d'images pour l'intelligence artificielle, et Qt un système d'interface complet pour pouvoir créer une interface permettant de tester nos fonctions d'analyse d'images.\\
Il faudra par contre se concentrer sur les fonctions d'analyse parce qu’elles doivent être optimisé pour les systèmes embarqué.
\\\\
	Ensuite la création sous Unity  d'une simulation avec les différents paramètres permettant de créer des comportements par défaut et testant les différents algorithmes.Elle devra prévoir les spécificités du matériel et prévoir différents tests pour différents environnements et situations.\\
	
\begin{comment} 
\\\\
RENDU FINAL:\\
	Paramètres de fonctions\\
	Carte de disparité\\
	Carte de profondeur\\
	Rapport\\
	Avec graphiques performances\\
	Tests\\
	Soutenance\\
\end{comment}

\newpage
\section{Analyse de l’existant}


\newpage
\section{Besoins-non fonctionnels}


\newpage
\section{Besoins fonctionnels}


%------------------%
\newpage
\part{Architecture}


\newpage
\section{Vue Global et conventions}

\newpage
\section{Interface Qt}

\newpage
\section{Bibliothèque d'analyse}

\newpage
\subsection{Filtre d'images}

\newpage
\subsection{Carte de disparité}

\newpage
\subsection{Calibration Camera}

\newpage
\subsection{Carte de profondeur}

\newpage
\section{Simulation}

%------------------%
\newpage
\part{Tests}

\newpage
\section{Tests unitaires}

\newpage
\section{Performances}


%------------------%
\newpage
\part{Bilan}

\newpage
\section{Difficultés rencontrés}

\newpage
\section{Critique et améliorations potentielles}

%------------------%
\newpage
\appendix
\part{Annexes}

\listoffigures

\newpage
\section{Hiérarchie du projet}
\lstinputlisting[]{hierarchie.txt}


\newpage
\section{Rapport Initial}
Scission du groupe initial du fait de problèmes internes concernant des choix d'implémentation de l'interface graphique.\\

Fonctionnalités de base déjà présentes à ce moment :\\
	-Fonctions de conversion basique d'images de OpenCv vers Qt.\\
	-Mise en place d'une bibliothèque graphique d'analyse adaptant les fonctions d'OpenCv.\\
	-Ouverture de dialogues particulier pour les cartes de disparité.\\
	-Filtres de flou Gaussien, de Laplacien, et de séparation d'image pour les cartes de disparité implémenté.\\
	-Fonction de débuguage d'image pour l'affichage OpenCv crée.\\

\newpage
\section{Rapport 05 novembre 2018}

\textbf{Rapport du groupe CERUTTI}\\
Le 05 novembre 2018\\

Interface graphique:\\
	-Rajout d'une check box pour remettre à l'image d'origine automatiquement dans la fenêtre principal.\\
	-Rajout de l'affichage de l'approximation de l'efficacité des fonctions.\\
	-Mise a jour du code des boutons, des menus, et des fenêtres pour implémenter ces nouvelles mécaniques.\\
	-Rajout d'une fenêtre pour les paramètres de StereoBM.\\
	-Rajout des boutons de Sobel et Flou gaussien.
\\
	
Analyse d'images:\\
	-Amélioration des algorithmes pour prendre en charge les images en GrayScale, permet d'enlever les conversions redondantes, et l'utilisation des fonctions de manière successives facilité.\\
	-Rajout de showMatrice(cv::Mat mat) dans ImageAnalyser pour le débuguage.\\
	-Rajout de computeEfficiency(double time, func, args) pour avoir une approximation de l'efficacité des algorithmes.\\
	-Rajout des fonctions Sobel et Flou gaussien.\\

Mise en place d'un exécutable pour les tests d'analyse d'images.\\

Pistes d'améliorations:\\
	-Implémentation des tests\\
	-Recherche des meilleurs paramètres pour algorithmes stereo\\
	-Factorisation du code pour les fenêtres BM et SGBM\\
	-Recherche sur la possible utilisation de threads\\
	-SteroVar non essayé openCv\\
	-Recherche analyse de flux vidéo\\
	-Recherche object tracking et template
\\\\

\textbf{Remarques professeur :}\\
Pas d'image dans Git\\
Signaler fuites mémoire, même bibliothèque\\
Sobel demandé n'est pas juste l'utilisation la fonction de OpenCv, l'objectif était de faire un gradient\\
Voire problème de carte de disparité\\
Trop de découpage  de code\\
Laisser le code cvtColor dans les fonctions nécessaires sinon cela ne facilite pas la lecture de code\\
Mettre des références à la place de la recopie de matrice
\\\\

\textbf{Prochaine séance :}\\
Simplifier le code\\
Renommer les variables avec convention (code et fichiers) et commenter le code\\
Voire carte disparité problème\\
Prévoir quoi faire avec le matériel\\
\\\\

\newpage
\section{Rapport 5 Décembre 2018}
Rapport du groupe CERUTTI
Le 05 Décembre 2018


Correction depuis dernier rendu:

    -Adoption d'une convention de nommage:\\
Attribut                        |\_name\_complete            
Variables locales         		|name\_complete                
Méthodes                    	|nameComplete
Classes                        	|NameClass
Fichiers                        |nameclass.*

    -Changement de la fonction Sobel en Gradient, et implémentation en vrai Gradient.\\
    -Correction des cartes de disparité inversé\\
    -Amélioration des performances en enlevant la recopie des return et en passant des références en paramètre.\\
   

Calibration:
    -Implémentation de findOneCalibration. Pour une image particulier il trouve les paramètres de calibration,
et les mets dans un fichier. Il envoie ensuite dans la matrice de sortie l'image non distordue.\\
    -Test valgrind, 32 erreurs externes (supposé lié à la bibliothèque Qt).\\

Interface graphique:\\
    -Rajout d'une option TestCameraCalibrate, dans les menus prend l'image courant d'interface et applique findOneCalibration.\\
Remarque, certaines images sont distordus comme la set1/10\_20\_43\_159.jpg après calibration. Possibilité que le ChessBoard soit trop loin, couplé au fait qu'il n'y a qu'une seule valuation de calibration.
   \\

Pistes d'améliorations:\\
    -Filtre pour les cartes de disparité (si cela n'impacte pas les performances)\\
    -Créer un système de sauvegarde général pour calibration et performances.\\
    -Améliorer le système de calibration par multiples valeurs et prise en charge automatique de calibration par dossier d'images.\\
    -Améliorer l'interface pour prendre en compte la calibration de différentes caméras.\\

\textbf{Remarques professeur :}\\
Sobel erreur\\
Syntheses à améliorer\\
-enlever qtdesigner.txt\\
-mettre algos\\
-résultats\\
-problème\\
-pas de code dans rapport\\

Erreur récurentes (?)\\
Rigueur sur le code, moins sur la théorie\\
Rapport pas un bilan d'activité\\


\newpage

\end{document}
